<h1 *ngIf="editMode===false" mat-dialog-title>
    <span>Crear publicación</span>
    <mat-icon mat-dialog-close matTooltip="Cancelar">cancel</mat-icon>
</h1>
<h1 *ngIf="editMode===true" mat-dialog-title>
    <span>Editar publicación</span>
    <mat-icon mat-dialog-close matTooltip="Cancelar">cancel</mat-icon>
</h1>

<form [formGroup]="formPublicacion" (ngSubmit)="onSubmit()">
    <mat-dialog-content>
        <!-- Descripción -->
        <div class="row">
            <mat-form-field class="full-width">
                <mat-label>Descripción de la publicación</mat-label>
                <textarea matInput rows="3" placeholder="El H. Ayuntamiento de San Jacinto Amilpas ha realizado ..."
                    formControlName="descripcion"></textarea>
            </mat-form-field>
        </div>
        <!-- Radio button duración -->
        <div class="row">
            <label>Duración de la publicación</label>
            <mat-radio-group name="fecha" color="primary">
                <div class="row">
                    <div class="col">
                        <div class="row">
                            <mat-radio-button name="fecha" class="radio-button" [value]="1" checked>Indeterminado</mat-radio-button>
                        </div>
                        <div class="row">
                            
                        </div>
                    </div>
                    <div class="col">
                        <div class="row">
                            <mat-radio-button name="fecha" class="radio-button" [value]="2" >
                                Periodo de tiempo</mat-radio-button>
                        </div>
                        <div class="row">
                            <mat-form-field class="full-width">
                                <mat-label>Duración de la publicación</mat-label>
                                <mat-date-range-input [rangePicker]="picker">
                                    <input matStartDate formControlName="fecha_inicio" placeholder="Inicio">
                                    <input matEndDate formControlName="fecha_fin" placeholder="Fin">
                                </mat-date-range-input>
                                <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-date-range-picker #picker></mat-date-range-picker>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </mat-radio-group>
        </div>
        <!-- Tabs -->
        <mat-tab-group mat-align-tabs="center">
            <mat-radio-group name="contenido" color="primary" [(ngModel)]="tipo_pub">
                <mat-tab>
                    <ng-template mat-tab-label>
                        <mat-icon>cloud_upload</mat-icon>Foto/video
                    </ng-template>
                    <!-- Radio button tipo publicación -->
                    <div class="row personalizado">
                        <div class="col">
                            <mat-radio-button name="contenido" class="radio-button" value="foto">Foto</mat-radio-button>
                        </div>
                        <div class="col">
                            <mat-radio-button name="contenido" class="radio-button" value="video">Video</mat-radio-button>
                        </div>
                    </div>
                    <div class="row personalizado">
                        <input type='file' (change)="onSelectFile($event)" formControlName="multimedia"/>
                    </div>
                    <div class="row personalizado">
                        <img class="img-fluid" [src]="url" *ngIf="format==='image' && url">
                        <video [src]="url" *ngIf="format==='video' && url" controls></video>
                    </div>
                </mat-tab>
                <mat-tab>
                    <ng-template mat-tab-label>
                        <mat-icon>code</mat-icon>Insertar
                    </ng-template>
                    <!-- Radio button tipo publicación -->
                    <div class="row personalizado">
                        <div class="col">
                            <mat-radio-button name="contenido" class="radio-button" value="foto-src">Foto</mat-radio-button>
                        </div>
                        <div class="col">
                            <mat-radio-button name="contenido" class="radio-button" value="iframe">Video/Red social</mat-radio-button>
                        </div>
                    </div>
                    <!-- Input de archivo -->
                    <div class="row personalizado">
                        <mat-form-field class="full-width">
                            <mat-label>Link de multimedia</mat-label>
                            <span matPrefix>
                                <mat-icon>link</mat-icon> &nbsp;
                            </span>
                            <input matInput type="text" value="{{formPublicacion.value.multimedia}}"
                                formControlName="multimedia">
                        </mat-form-field>
                    </div>
                    <!-- Visualizador -->
                    <div class="row personalizado">
                        <img class="img-fluid" src="{{formPublicacion.value.multimedia}}" alt="">
                    </div>
                </mat-tab>
            </mat-radio-group>
        </mat-tab-group>
    </mat-dialog-content>
    <mat-dialog-actions>
        <button mat-raised-button color="primary" [disabled]="formPublicacion.invalid" [mat-dialog-close]="true">
            <mat-icon>publish</mat-icon>Publicar
        </button>
    </mat-dialog-actions>
</form>